<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8">
  <title>Centrum Sterowania</title>
  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      background-color: #0d0d0d;
      color: #f0f0f0;
      font-family: 'Segoe UI', sans-serif;
      padding: 20px;
      animation: fadeIn 1s ease-in;
    }

    h1 {
      text-align: center;
      margin-bottom: 30px;
      font-size: 2.5em;
    }

    .container {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 20px;
    }

    .panel {
      background: #1b1b1b;
      padding: 20px;
      border-radius: 16px;
      box-shadow: 0 4px 15px rgba(255, 255, 255, 0.05);
      animation: fadeUp 0.6s ease;
      transition: transform 0.2s;
    }

    .panel:hover {
      transform: translateY(-5px);
    }

    .time {
      font-size: 48px;
      font-weight: bold;
      text-align: center;
    }

    .calendar, .weather, .quote {
      text-align: center;
      font-size: 18px;
    }

    .buttons button {
      background: linear-gradient(145deg, #2a2a2a, #111);
      color: white;
      padding: 12px 24px;
      border: none;
      margin: 8px 0;
      border-radius: 10px;
      width: 100%;
      cursor: pointer;
      font-size: 16px;
      transition: background 0.3s ease, transform 0.2s;
    }

    .buttons button:hover {
      background: #333;
      transform: scale(1.02);
    }

    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }

    @keyframes fadeUp {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }
  </style>
</head>
<body>
  <h1>Centrum Sterowania</h1>

  <div class="container">
    <div class="panel">
      <h2>🕒 Godzina</h2>
      <div class="time" id="clock">--:--:--</div>
    </div>

    <div class="panel">
      <h2>📜 Log przycisków</h2>
      <div class="weather" id="log">Brak aktywności.</div>
    </div>

    <div class="panel">
      <h2>📅 Kalendarz</h2>
      <div class="calendar" id="calendar"></div>
    </div>

    <div class="panel">
      <h2>🏠 Smart Home</h2>
      <div class="buttons">
        <button onclick="sendGetRequest('https://fra1.blynk.cloud/external/api/update?token=xe3c5ha8FWig5W-nL9ULmIphEo_9lq8u&V7=1', 'V7')"> Otwórz Bramę</button>
        <button onclick="sendGetRequest('https://fra1.blynk.cloud/external/api/update?token=xe3c5ha8FWig5W-nL9ULmIphEo_9lq8u&V8=1', 'V8')"> Otwórz Garaż</button>
        <button onclick="openGarageAndGate()"> Otwórz Garaż i Bramę</button>
      </div>
    </div>
  </div>

  <script>
    // Zegar
    function updateClock() {
      const now = new Date();
      document.getElementById("clock").textContent = now.toLocaleTimeString();
    }
    setInterval(updateClock, 1000);
    updateClock();

    // Kalendarz
    const date = new Date();
    document.getElementById("calendar").textContent = date.toLocaleDateString('pl-PL', {
      weekday: 'long', year: 'numeric', month: 'long', day: 'numeric'
    });

    // Log przycisków
    function logAction(pin) {
      const time = new Date().toLocaleTimeString();
      const log = document.getElementById("log");
      log.textContent = `Ostatnia akcja: pin ${pin} o ${time}`;
    }

    // Wysyłanie GET z logiem
    function sendGetRequest(url, pin) {
      fetch(url, { method: 'GET', mode: 'no-cors' })
        .then(() => {
          console.log(`GET wysłany do: ${url}`);
          logAction(pin);
        })
        .catch(err => console.error('Błąd:', err));
    }

    // Otwieranie garażu i bramy z odstępem 1s
    function openGarageAndGate() {
      const gateUrl = 'https://fra1.blynk.cloud/external/api/update?token=xe3c5ha8FWig5W-nL9ULmIphEo_9lq8u&V7=1';
      const garageUrl = 'https://fra1.blynk.cloud/external/api/update?token=xe3c5ha8FWig5W-nL9ULmIphEo_9lq8u&V8=1';

      sendGetRequest(gateUrl, 'V7');
      setTimeout(() => {
        sendGetRequest(garageUrl, 'V8');
      }, 1000);
    }
  </script>
</body>
</html>
